<!doctype html>
<html>

<head>
  <meta charset="utf-8" />
  <title>Split</title>
</head>

<body style="font-family:-apple-system,system-ui,sans-serif;margin:18px;">
  <h2>Split Analysis</h2>
  <div style="background: #f9f9f9; padding: 20px; border-radius: 8px; border: 1px solid #ddd; max-width: 600px;">
    <p>File: <strong>{{ file }}</strong></p>

    <form method="post" action="/split">
      <input type="hidden" name="file" value="{{ file }}" />

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-size: 1.1em; cursor: pointer;">
          <input type="radio" name="mode" value="parts" checked onchange="toggleInputs()">
          <strong>Split into Parts (Bulk Text)</strong>
        </label>
        <div id="parts_options" style="margin-left: 28px; display: block; color: #555;">
          <p style="margin: 0; font-size: 0.9em;">
            Best for novels or documents without clear "Chapter X:" headers.
            Automatically chunks text while maintaining paragraph integrity.
          </p>
        </div>
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-size: 1.1em; cursor: pointer;">
          <input type="radio" name="mode" value="chapter" onchange="toggleInputs()">
          <strong>Split by Chapter Markers</strong>
        </label>
        <div id="chapter_options" style="margin-left: 28px; display: none; color: #555;">
          <p style="margin: 0; font-size: 0.9em;">
            Looks for headers like <code>Chapter 10: Title</code>.
            Will fail if markers are not found.
          </p>
        </div>
      </div>

      <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #eee;">
        <button type="submit"
          style="padding: 12px 24px; background: #007aff; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: bold; font-size: 1rem;">
          Continue to Processing
        </button>
        <a href="/" style="margin-left: 20px; color: #666; text-decoration: none; font-size: 0.9rem;">Cancel</a>
      </div>
    </form>
  </div>

  <script>
    function toggleInputs() {
      const mode = document.querySelector('input[name="mode"]:checked').value;
      document.getElementById('parts_options').style.display = (mode === 'parts') ? 'block' : 'none';
      document.getElementById('chapter_options').style.display = (mode === 'chapter') ? 'block' : 'none';
    }
  </script>
</body>

</html>