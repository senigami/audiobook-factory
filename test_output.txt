============================= test session starts ==============================
platform darwin -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0 -- /Users/stevendunn/GitHub-Steven/audiobook-factory/venv/bin/python3.11
cachedir: .pytest_cache
rootdir: /Users/stevendunn/GitHub-Steven/audiobook-factory
configfile: pytest.ini
plugins: anyio-4.12.1, typeguard-4.5.0, cov-7.0.0
collecting ... collected 1 item

tests/test_api.py::test_backfill_surgical_logic ERROR                    [100%]
ERROR: Coverage failure: total of 16 is less than fail-under=60


==================================== ERRORS ====================================
________________ ERROR at setup of test_backfill_surgical_logic ________________
file /Users/stevendunn/GitHub-Steven/audiobook-factory/tests/test_api.py, line 53
  def test_backfill_surgical_logic(client, temp_chapter, monkeypatch):
E       fixture 'client' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, clean_storage, cov, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, no_cover, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, temp_chapter, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/stevendunn/GitHub-Steven/audiobook-factory/tests/test_api.py:53
================================ tests coverage ================================
______________ coverage: platform darwin, python 3.11.14-final-0 _______________

Name               Stmts   Miss  Cover   Missing
------------------------------------------------
app/config.py         36     12    67%   18-20, 23-25, 28-30, 33-35
app/db.py            264    217    18%   76-86, 89-94, 97-101, 104-118, 121-128, 132-142, 145-150, 153-157, 160-176, 179-184, 187-193, 196-231, 235-249, 252-264, 267-272, 275-324, 327-332, 336-357, 360-372, 381-431
app/engines.py       192    174     9%   15-24, 27-91, 94-100, 103-134, 139-147, 151-162, 177-287, 302-322
app/jobs.py          356    319    10%   25-30, 34-39, 42-44, 49-55, 59, 63-66, 69-72, 75, 79-84, 88-110, 123-212, 219-229, 234-265, 270-635
app/migration.py      37     37     0%   1-79
app/models.py         30      0   100%
app/state.py         145    106    27%   20, 53-70, 74-75, 79-80, 84-86, 90-94, 98-105, 109-113, 117-128, 132-136, 140-203, 207-213
app/textops.py       197    179     9%   52-57, 60-72, 75-117, 121-122, 125-138, 141-150, 153-191, 194-201, 220-260, 269-300, 308-320, 328-353
app/web.py          1092    923    15%   49, 56-57, 61-62, 67-73, 79-94, 102-112, 116-123, 127-134, 139-200, 204-205, 209-217, 220-221, 224-225, 228-231, 234-242, 247, 250-299, 304, 308-311, 320-331, 341-362, 366-369, 375, 385-395, 398-402, 410-424, 428-431, 435-439, 444-451, 455-483, 501, 515-538, 555-563, 567-568, 572-592, 596-621, 629-642, 646-703, 708, 713-715, 719-721, 726-735, 745-779, 784-822, 830-868, 872-886, 890-906, 910-924, 931-983, 987-1021, 1025-1045, 1050-1097, 1101-1102, 1106-1110, 1114-1144, 1148-1175, 1182-1217, 1220-1283, 1289-1344, 1357-1372, 1376-1379, 1384-1450, 1455-1470, 1475-1483, 1488-1523, 1530-1545, 1549-1554, 1563-1614, 1618-1626, 1630-1634, 1638-1640, 1646-1649, 1654-1679, 1683-1750
------------------------------------------------
TOTAL               2349   1967    16%
FAIL Required test coverage of 60% not reached. Total coverage: 16.26%
=========================== short test summary info ============================
ERROR tests/test_api.py::test_backfill_surgical_logic
=============================== 1 error in 0.34s ===============================
