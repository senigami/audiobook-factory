============================= test session starts ==============================
platform darwin -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0 -- /Users/stevendunn/GitHub-Steven/audiobook-factory/venv/bin/python3.11
cachedir: .pytest_cache
rootdir: /Users/stevendunn/GitHub-Steven/audiobook-factory
configfile: pytest.ini
plugins: anyio-4.12.1, typeguard-4.5.0, cov-7.0.0
collecting ... collected 1 item

tests/test_isolation_security.py::test_legacy_path_and_forward_sync ERROR [100%]
ERROR: Coverage failure: total of 6 is less than fail-under=60


==================================== ERRORS ====================================
_____________ ERROR at setup of test_legacy_path_and_forward_sync ______________
file /Users/stevendunn/GitHub-Steven/audiobook-factory/tests/test_isolation_security.py, line 184
  def test_legacy_path_and_forward_sync(tmp_path, sandbox_env):
E       fixture 'sandbox_env' not found
>       available fixtures: anyio_backend, anyio_backend_name, anyio_backend_options, cache, capfd, capfdbinary, caplog, capsys, capsysbinary, capteesys, clean_storage, client, cov, doctest_namespace, free_tcp_port, free_tcp_port_factory, free_udp_port, free_udp_port_factory, monkeypatch, no_cover, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, subtests, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory
>       use 'pytest --fixtures [testpath]' for help on them.

/Users/stevendunn/GitHub-Steven/audiobook-factory/tests/test_isolation_security.py:184
================================ tests coverage ================================
______________ coverage: platform darwin, python 3.11.14-final-0 _______________

Name               Stmts   Miss  Cover   Missing
------------------------------------------------
app/config.py         36     12    67%   18-20, 23-25, 28-30, 33-35
app/db.py            264    217    18%   76-86, 89-94, 97-101, 104-118, 121-128, 132-142, 145-150, 153-157, 160-176, 179-184, 187-193, 196-231, 235-249, 252-264, 267-272, 275-324, 327-332, 336-357, 360-372, 381-431
app/engines.py       192    192     0%   1-322
app/jobs.py          356    356     0%   1-643
app/migration.py      37     37     0%   1-79
app/models.py         30      0   100%
app/state.py         145    106    27%   20, 53-70, 74-75, 79-80, 84-86, 90-94, 98-105, 109-113, 117-128, 132-136, 140-203, 207-213
app/textops.py       197    197     0%   42-353
app/web.py          1092   1092     0%   1-1750
------------------------------------------------
TOTAL               2349   2209     6%
FAIL Required test coverage of 60% not reached. Total coverage: 5.96%
=========================== short test summary info ============================
ERROR tests/test_isolation_security.py::test_legacy_path_and_forward_sync
=============================== 1 error in 0.08s ===============================
